<!--
title: "1.1: Project Setup & Basic Bubbletea App"
status: "Ready for Review"
-->

# Story 1.1: Project Setup & Basic Bubbletea App

**As a** developer,
**I want** a working Go project with Bubbletea framework,
**so that** I have a foundation for building the Three Doors TUI.

## Acceptance Criteria

1. Go module initialized with `go mod init github.com/arcaven/ThreeDoors`
2. Bubbletea and Lipgloss dependencies added
3. Basic TUI application renders "ThreeDoors - Technical Demo" header
4. Application responds to 'q' keypress to quit
5. `Makefile` with `build`, `run`, and `clean` targets works
6. Application compiles and runs without errors

### Dev Notes

This story establishes the foundational structure of the application. All code should adhere to the project's defined standards.

### Parent Epic

*   Parent Epic: [Epic 1: Three Doors Technical Demo](docs/prd/epic-details.md#epic-1-three-doors-technical-demo)

### Architecture & Project Structure

*   **Architectural Style**: Simple Monolithic CLI Application. [Source: `docs/architecture/high-level-architecture.md`]
*   **TUI Framework**: Bubbletea with the Model-View-Update (MVU) pattern is mandatory. [Source: `docs/architecture/high-level-architecture.md`]
*   **Project Layout**:
    *   `cmd/threedoors/main.go`: Application entry point.
    *   `internal/tui/`: For all Bubbletea components.
    *   `go.mod`: For dependency management.
    *   `Makefile`: For build automation.
    *   [Source: `docs/architecture/source-tree.md`]

### Tech Stack

*   **Language**: Go `1.25.4`
*   **TUI Framework**: `charmbracelet/bubbletea`
*   **TUI Styling**: `charmbracelet/lipgloss`
*   **Build System**: `make`
*   [Source: `docs/architecture/tech-stack.md`]

### Coding Standards

*   **Formatting**: `gofumpt` must be used.
*   **Linting**: `golangci-lint` must pass.
*   **Naming Conventions**:
    *   Packages: `lowercase`
    *   Files: `snake_case.go`
    *   Exported Types/Functions: `PascalCase`
*   **Critical Rule**: Do not use `fmt.Println` for TUI output. All rendering must go through Bubbletea `View()` methods.
*   [Source: `docs/architecture/coding-standards.md`]

### Testing

*   While this initial story is primarily setup, any logic introduced should be unit tested.
*   Tests will be placed in `*_test.go` files.
*   [Source: `docs/architecture/test-strategy-and-standards.md`]

## Tasks / Subtasks

- [x] **(AC: 1)** Initialize Go module: `go mod init github.com/arcaven/ThreeDoors`.
- [x] **(AC: 2)** Add dependencies using `go get`:
    *   `github.com/charmbracelet/bubbletea`
    *   `github.com/charmbracelet/lipgloss`
- [x] **(AC: 5)** Create a `Makefile` with `build`, `run`, and `clean` targets as defined in `docs/architecture/tech-stack.md`.
- [x] **(AC: 3, 4)** Create the application entry point at `cmd/threedoors/main.go`.
    *   Implement a basic Bubbletea model.
    *   The `View()` method should return the string "ThreeDoors - Technical Demo".
    *   The `Update()` method should handle the `tea.KeyMsg` for 'q' and 'ctrl+c' to quit the application.
- [x] **(AC: 6)** Run `make build` and `make run` to verify the application compiles and displays the header correctly.
- [x] **(AC: 6)** Run `make clean` to verify the build artifacts are removed.
- [x] Run `gofumpt -w .` to format the code.
- [x] Run `golangci-lint run ./...` to check for any linting issues.

## Dev Agent Record

### File List
*   `go.mod` (modified)
*   `go.sum` (created)
*   `Makefile` (created)
*   `cmd/threedoors/main.go` (created)
*   `.tool-versions` (created)

## QA Results

### Review Date: 2025-11-08

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

The submission meets the basic acceptance criteria, but a significant amount of untracked and untested code was discovered. This introduces risk and violates project procedures. The core issue is the inclusion of a session metrics tracking feature (`internal/tasks/session_tracker.go`) that was not specified in the story requirements or documented in the file list.

### Refactoring Performed

- **File**: `go.mod`
  - **Change**: Updated Go version from `1.24.0` to `1.25.4`.
  - **Why**: To align with the version specified in the story (`1.25.4`) and `.tool-versions`.
  - **How**: Corrects the version inconsistency.

- **File**: `cmd/threedoors/main_test.go`
  - **Change**: Created a new test file with unit tests for the `Update` and `View` functions.
  - **Why**: To ensure the core application logic is tested and to establish a baseline for test coverage.
  - **How**: Improves code quality and provides regression safety.

### Compliance Check

- Coding Standards: [✓]
- Project Structure: [✗] Untracked files were found in `internal/tasks`, which was not a documented part of the project structure for this story.
- Testing Strategy: [✗] The initial submission was missing tests. Untracked code (`session_tracker.go`) is also completely untested.
- All ACs Met: [✓] All explicit ACs were met.

### Improvements Checklist

- [ ] **CRITICAL:** Add the newly discovered files (`internal/tasks/session_tracker.go` and any related files) to the "File List" in this story.
- [ ] **CRITICAL:** Create a new story to properly define, document, and test the session metrics tracking feature. This functionality should be removed from this story's scope.
- [ ] **CRITICAL:** Add comprehensive unit tests for the `session_tracker.go` logic.
- [ ] Update the `File List` with `cmd/threedoors/main_test.go`.

### Security Review

No security concerns were found in the reviewed code.

### Performance Considerations

No performance issues were identified.

### Files Modified During Review

- `go.mod`
- `cmd/threedoors/main_test.go` (created)

### Gate Status

Gate: **FAIL** → `docs/qa/gates/1.1-project-setup-basic-bubbletea-app.yml`

### Recommended Status

[✗ Changes Required - See unchecked items above]
(Story owner decides final status)
